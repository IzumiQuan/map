var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,r=(e,t)=>{for(var a in t||(t={}))o.call(t,a)&&s(e,a,t[a]);if(n)for(var a of n(t))l.call(t,a)&&s(e,a,t[a]);return e},i=(e,n)=>t(e,a(n));import{r as u,w as c,t as p,a as d,c as m,o as v,M as y,P as f,b as g,T as h,d as x,e as k,f as w,g as b,h as S,i as $,j as L,k as V,F as M,l as P,m as z,n as A,p as O,q as C,s as N,u as D,v as X,x as Y,y as I,z as j,A as B,B as T,C as W}from"./vendor.3850074b.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const F=[{name:"毛线V4—下界交通地图",type:"kedamaV4Nether"},{name:"毛线V4—主世界交通地图",type:"kedamaV4World"},{name:"毛线V3—下界交通地图",type:"kedamaV3Nether117"},{name:"毛线V3—主世界交通地图",type:"kedamaV3World"},{name:"毛线V2—下界交通地图",type:"kedamaV2Nether115"},{name:"毛线V2—下界基岩上层萌新通道",type:"kedamaV2Nether128"},{name:"毛线V2—主世界通地图",type:"kedamaV2World"},{name:"喵窝—下界基岩上层交通地图",type:"nyaaNether129"},{name:"喵窝—下界交通地图",type:"nyaaNether"},{name:"喵窝—主世界通地图",type:"nyaaWorld"}],q=[{key:"--color-ice",value:"#7FDBFF",name:"冰道"},{key:"--color-rail",value:"#FFDC00",name:"铁路"},{key:"--color-walk",value:"#85144b",name:"步道"},{key:"--color-green",value:"#2ECC40",name:"通顶"},{key:"--color-frame",value:"#AAAAAA",name:"边框"}];function H(e){const t=d({translateX:0,translateY:0,scale:1,leastWidth:1,transform:"",pointMessage:"",pointStyle:{}}),a=m((()=>.45*t.scale*t.leastWidth/e.value.radius));function n(e,a,n){t.transform=`translate3d(${e}px, ${a}px, 0px) scale3d(${n}, ${n}, 1)`,t.pointMessage="",t.pointStyle={}}return v((()=>{const o=document.getElementById("app-svg"),l=o.offsetWidth,s=o.offsetHeight,u=new y(o),c=new f,p=new g,d=new h;t.leastWidth=window.matchMedia("(orientation: portrait)").matches?l:s,u.add([c,p,d]),u.on("panmove",(({deltaX:e,deltaY:a})=>{n(t.translateX+e,t.translateY+a,t.scale)})),u.on("panend",(({deltaX:e,deltaY:a})=>{t.translateX+=e,t.translateY+=a})),u.get("pinch").set({enable:!0}),u.on("pinchmove",(({scale:e,center:a})=>{const o=t.scale*e;o>=.3&&o<=50&&n(t.translateX+(a.x-l/2-t.translateX)*(1-e),t.translateY+(a.y-s/2-t.translateY)*(1-e),t.scale*e)})),u.on("pinchend",(({scale:e,center:a})=>{const n=t.scale*e;t.scale=n<.3?.3:n>50?50:n,n>=.3&&n<=50&&(t.translateX+=(a.x-l/2-t.translateX)*(1-e),t.translateY+=(a.y-s/2-t.translateY)*(1-e))})),u.on("tap",(({center:n})=>{!function({x:n,y:o,screeWidth:l,screeHeight:s}){const r=~~((n-l/2-t.translateX)/a.value+e.value.center.x),i=~~((o-s/2-t.translateY)/a.value+e.value.center.z);t.pointMessage=`x: ${r}, z: ${i}`,t.pointStyle={left:n+"px",top:o+"px"}}(i(r({},n),{screeWidth:l,screeHeight:s}))})),o.onwheel=function(e,t){let a=0;return function(...n){const o=(new Date).getTime();o-a>t&&(e.call(this,...n),a=o)}}((function(e){(a=e,new Promise((e=>{let t=!0;t=a.wheelDelta?a.wheelDelta>0:a.detail<0,a.preventDefault&&a.preventDefault(),e({center:{x:a.clientX,y:a.clientY},direction:t})}))).then((({direction:e,center:a})=>{const o=t.scale*(e?1.1:.9);t.scale=o<.3?.3:o>50?50:o,o>=.3&&o<=50&&(t.translateX+=(a.x-l/2-t.translateX)*(e?-.1:.1),t.translateY+=(a.y-s/2-t.translateY)*(e?-.1:.1),n(t.translateX,t.translateY,t.scale))}));var a}),50)})),i(r({},p(t)),{relativeScale:a,setTransform:n})}function E(){const e=function(e){const t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(t);return null!==a?unescape(a[2]):null}("type")||function(){const e=localStorage.getItem("map-type");return e?JSON.parse(e):void 0}()||F[0].type,t=u(e);return c(t,(function(){localStorage.setItem("map-type",JSON.stringify(t.value))})),t}const J={title:"",radius:0,center:{x:0,z:0},data:[]};function _(e){const t=u(!1),a=u(J);async function n(){t.value=!0,a.value=J,a.value=await async function(e){return(await fetch(e)).json()}(`/config/${e.value}.json`),t.value=!1}return n(),c(e,n),{loading:t,mapData:a}}var Q=x({name:"AppHeader",props:{title:{type:String,default:""}}});const U={class:"header"},K={class:"title"},R={class:"fun-content"};Q.render=function(e,t,a,n,o,l){return P(),k(M,null,[w("header",U,[w("h1",K,b(e.title),1),w("div",R,[S(e.$slots,"default")])]),(P(),$(V,{to:"title"},[L(b(e.title),1)]))],64)};var G=x({name:"AppSvg",props:{data:{type:Object,required:!0},loading:Boolean,style:Object},emits:["nameList","overPath"],setup(e,{emit:t}){const{data:a,loading:n,style:o}=p(e),{borderstyle:l,radius:s,center:r,viewBox:i,dataList:d,nameList:v,parsePath:y}=function(e){const t=m((()=>e.value.borderstyle||!1)),a=m((()=>e.value.radius||0)),n=m((()=>e.value.center||{x:0,z:0})),o=m((()=>`0 0 ${2*a.value} ${2*a.value}`)),l=m((()=>e.value.data||[])),s=m((()=>{let e=[];for(let t=0;t<l.value.length;t++){const a=l.value[t];a.name&&e.push({name:a.name,point:a.points[a.points.length-1]}),a.namelist&&(e=e.concat(a.namelist))}return e}));return{borderstyle:t,radius:a,center:n,viewBox:o,dataList:l,nameList:s,parsePath:function(e){let t="";for(let o=0;o<e.length;o++){const l=e[o],s=l.x+a.value-n.value.x,r=l.z+a.value-n.value.z;if(0===o)t+=`M${s} ${r} `;else if(l.type){const i=e[o-1],u=i.x+a.value-n.value.x,c=i.z+a.value-n.value.z,p=(l.ex||0)+a.value-n.value.x,d=(l.ez||0)+a.value-n.value.z;"n-w"===l.type?t+=`Q${s>u?u:s} ${r>c?c:r} ${s} ${r} `:"n-e"===l.type?t+=`Q${s>u?s:u} ${r>c?c:r} ${s} ${r} `:"s-w"===l.type?t+=`Q${s>u?u:s} ${r>c?r:c} ${s} ${r} `:"s-e"===l.type?t+=`Q${s>u?s:u} ${r>c?r:c} ${s} ${r} `:t+=`Q${p} ${d} ${s} ${r} `}else t+=`L${s} ${r} `}return t}}}(a),{notes:f,client:g,enterPath:h,outPath:x}=function(){const e=u(""),t=u({});return{notes:e,client:t,enterPath:function({clientX:a,clientY:n},o){o&&(e.value=o,t.value={left:a+"px",top:n+"px"})},outPath:function(){e.value&&setTimeout((()=>{e.value="",t.value={}}),300)}}}();return c(v,(()=>{t("nameList",v.value)})),c(g,(()=>{t("overPath",{style:g.value,message:f.value})})),{loading:n,style:o,borderstyle:l,radius:s,center:r,viewBox:i,dataList:d,nameList:v,parsePath:y,enterPath:h,outPath:x}}});const Z={id:"app-svg"},ee={key:"true",class:"loading"},te=[w("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},[w("path",{d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4",opacity:".25"}),w("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"},[w("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"0.8s",repeatCount:"indefinite"})])],-1)],ae=["viewBox"],ne=["width","height"],oe=["cx","cy","r"],le=["d"],se=["cx","cy","onMouseenter"],re=["d","onMouseenter"],ie=["x","y"];G.render=function(e,t,a,n,o,l){return P(),k("section",Z,[z(O,{name:"mode-fade",mode:"out-in"},{default:A((()=>[e.loading?(P(),k("div",ee,te)):(P(),k("svg",{key:"flase",style:C(e.style),viewBox:e.viewBox,class:"svg",xmlns:"http://www.w3.org/2000/svg"},[w("g",null,["square"===e.borderstyle?(P(),k("rect",{key:0,width:2*e.radius,height:2*e.radius,class:"path border"},null,8,ne)):"circles"===e.borderstyle?(P(),k("circle",{key:1,cx:e.radius,cy:e.radius,r:e.radius,class:"path border"},null,8,oe)):Array.isArray(e.borderstyle)?(P(),k("path",{key:2,d:e.parsePath(e.borderstyle),class:"path border"},null,8,le)):N("",!0)]),w("g",null,[(P(!0),k(M,null,D(e.dataList,(a=>(P(),k(M,null,["green"===a.type?(P(),k("circle",{key:0,cx:a.points[0].x+e.radius-e.center.x,cy:a.points[0].z+e.radius-e.center.z,class:X([a.type,"path"]),onMouseenter:t=>e.enterPath(t,a.notes),onMouseout:t[0]||(t[0]=(...t)=>e.outPath&&e.outPath(...t))},null,42,se)):(P(),k("path",{key:1,d:e.parsePath(a.points),class:X([a.type,"path"]),onMouseenter:t=>e.enterPath(t,a.notes),onMouseout:t[1]||(t[1]=(...t)=>e.outPath&&e.outPath(...t))},null,42,re))],64)))),256))]),w("g",null,[(P(!0),k(M,null,D(e.nameList,((t,a)=>(P(),k("text",{key:a,x:t.point.x+e.radius-e.center.x,y:t.point.z+e.radius-e.center.z,class:"text"},b(t.name),9,ie)))),128))])],12,ae))])),_:1})])};var ue=x({name:"AppFooter",props:{uptime:{type:String,default:""},author:{type:String,default:""}}});const ce={class:"footer"},pe={key:0,class:"text"},de={key:1,class:"text"},me={key:2,class:"text"},ve={key:3,class:"text"};ue.render=function(e,t,a,n,o,l){return P(),k("footer",ce,[e.uptime?(P(),k("span",pe,"更新时间")):N("",!0),e.uptime?(P(),k("span",de,b(e.uptime),1)):N("",!0),e.author?(P(),k("span",me,"数据维护")):N("",!0),e.author?(P(),k("span",ve,b(e.author),1)):N("",!0)])};var ye=x({name:"SerachBox",props:{nameList:{type:Array,required:!0}},emits:["moveMap"],setup(e,{emit:t}){const{keyword:a,list:n}=function(e){const{nameList:t}=p(e),a=u(""),n=m((()=>a.value?t.value.filter((e=>{const t=a.value.trim().toLocaleLowerCase();return e.name.toLocaleLowerCase().includes(t)})):[]));return{keyword:a,list:n}}(e),o=u(!1);function l(){a.value="",o.value=!o.value}return{keyword:a,list:n,show:o,toggle:l,move:function(e){l(),t("moveMap",e)}}}});const fe=w("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1026 1024"},[w("path",{d:"M513.28 0C380.16 0 252.16 51.2 149.76 148.48-49.92 348.16-49.92 675.84 149.76 875.52c102.4 102.4 230.4 148.48 363.52 148.48 133.12 0 261.12-51.2 363.52-148.48C1076.48 675.84 1076.48 353.28 876.8 153.6c-102.4-102.4-235.52-153.6-363.52-153.6m0 51.2c61.44 0 117.76 10.24 174.08 35.84 56.32 25.6 107.52 56.32 153.6 102.4 46.08 46.08 76.8 97.28 102.4 153.6 20.48 51.2 30.72 107.52 30.72 168.96s-10.24 117.76-35.84 174.08c-25.6 56.32-56.32 107.52-102.4 153.6-46.08 46.08-97.28 76.8-153.6 102.4-51.2 20.48-107.52 30.72-168.96 30.72-61.44 0-117.76-10.24-174.08-35.84-56.32-25.6-107.52-56.32-153.6-102.4-46.08-46.08-76.8-97.28-102.4-153.6-20.48-51.2-30.72-107.52-30.72-168.96 0-61.44 10.24-117.76 35.84-174.08 25.6-56.32 56.32-107.52 102.4-153.6 46.08-46.08 97.28-76.8 153.6-102.4 51.2-20.48 107.52-30.72 168.96-30.72"}),w("path",{d:"M666.88 634.88l97.28 97.28c10.24 10.24 10.24 25.6 0 35.84-10.24 10.24-25.6 10.24-35.84 0l-97.28-97.28c-40.96 30.72-87.04 46.08-143.36 46.08C359.68 716.8 257.28 614.4 257.28 486.4S359.68 256 487.68 256 718.08 358.4 718.08 486.4c0 56.32-20.48 107.52-51.2 148.48z m-179.2 30.72c97.28 0 179.2-81.92 179.2-179.2S584.96 307.2 487.68 307.2 308.48 389.12 308.48 486.4 390.4 665.6 487.68 665.6z"})],-1),ge={class:"serach-inpit"},he={class:"serach-list"},xe=["onClick"],ke={class:"name"},we={class:"point"};ye.render=function(e,t,a,n,o,l){return P(),k("div",{class:"icon-button",onClick:t[3]||(t[3]=(...t)=>e.toggle&&e.toggle(...t))},[fe,(P(),$(V,{to:"body"},[z(O,{name:"mask-zoom"},{default:A((()=>[e.show?(P(),k("section",{key:0,class:"mask",onClick:t[2]||(t[2]=(...t)=>e.toggle&&e.toggle(...t))},[w("div",{class:"content",onClick:t[1]||(t[1]=B((()=>{}),["stop"]))},[w("div",ge,[Y(w("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.keyword=t),type:"text",autofocus:"",class:"input"},null,512),[[I,e.keyword]])]),z(O,{name:"zoom"},{default:A((()=>[Y(w("div",he,[(P(!0),k(M,null,D(e.list,((t,a)=>(P(),k("div",{key:a,class:"list-item",onClick:a=>e.move(t.point)},[w("span",ke,b(t.name),1),w("span",we,b(`x: ${t.point.x}, y: ${t.point.y}, z: ${t.point.z}`),1)],8,xe)))),128))],512),[[j,e.list.length]])])),_:1})])])):N("",!0)])),_:1})]))])};var be=x({name:"SelectSource",props:{modelValue:String},emits:["update:modelValue"],setup(e,{emit:t}){const{modelValue:a}=p(e);return{mapList:F,modelValue:a,selectItem:function(e){const a=e.target;t("update:modelValue",null==a?void 0:a.value)}}}});const Se=["value"],$e=["value"];be.render=function(e,t,a,n,o,l){return P(),k("select",{value:e.modelValue,class:"select-source",onChange:t[0]||(t[0]=(...t)=>e.selectItem&&e.selectItem(...t))},[(P(!0),k(M,null,D(e.mapList,(e=>(P(),k("option",{key:e.type,value:e.type},b(e.name),9,$e)))),128))],40,Se)};var Le=x({name:"ConfigColor",props:{modelValue:{type:Object,required:!0}},setup(e){const{modelValue:t}=p(e);return{colorList:q,modelValue:t,reset:function(e){t.value[e.key]=e.value}}}});const Ve={class:"config-color"},Me=["onUpdate:modelValue"],Pe=["onClick"];Le.render=function(e,t,a,n,o,l){return P(),k("section",Ve,[(P(!0),k(M,null,D(e.colorList,(t=>(P(),k("div",{key:t.key,class:"color-item"},[Y(w("input",{"onUpdate:modelValue":a=>e.modelValue[t.key]=a,type:"color",class:"input"},null,8,Me),[[I,e.modelValue[t.key]]]),w("span",{class:"text",onClick:a=>e.reset(t)},b(t.name),9,Pe)])))),128))])};var ze=x({name:"TipMessage",props:{type:{type:String,required:!0},version:Number,introduce:String},setup(e){const t=function(e){const{type:t,version:a,introduce:n}=p(e),o=u("");let l;function s(){if(a&&a.value){const e=l[t.value];(!e||e<a.value)&&(o.value=(null==n?void 0:n.value)||"",l[t.value]=a.value,localStorage.setItem("map-version",JSON.stringify(l)))}}return c([t,a],s),v((()=>{if(!l){const e=localStorage.getItem("map-version");l=e?JSON.parse(e):{}}s()})),o}(e);return{introduceInfo:t,close:function(){t.value=""}}}});const Ae=["innerHTML"];ze.render=function(e,t,a,n,o,l){return P(),$(V,{to:"body"},[z(O,{name:"mask-zoom"},{default:A((()=>[e.introduceInfo?(P(),k("section",{key:0,class:"mask",onClick:t[0]||(t[0]=(...t)=>e.close&&e.close(...t))},[w("div",{class:"content",innerHTML:e.introduceInfo},null,8,Ae)])):N("",!0)])),_:1})])};var Oe=x({name:"TipPoint",props:{message:String,style:Object}});Oe.render=function(e,t,a,n,o,l){return P(),$(V,{to:"body"},[z(O,{name:"zoom"},{default:A((()=>[e.message?(P(),k("div",{key:0,style:C(e.style),class:"tip-point"},b(e.message),5)):N("",!0)])),_:1})])};var Ce=x({name:"App",components:{AppHeader:Q,AppSvg:G,AppFooter:ue,SerachBox:ye,SelectSource:be,ConfigColor:Le,TipMessage:ze,TipPoint:Oe},setup(){const e=function(){const e=function(){const e=localStorage.getItem("color-list");return e?JSON.parse(e):void 0}()||function(){const e={};return q.forEach((({key:t,value:a})=>{e[t]=a})),e}(),t=u(e);return c(t,(function(){localStorage.setItem("color-list",JSON.stringify(t.value))}),{deep:!0}),t}(),t=E(),{loading:a,mapData:n}=_(t),{translateX:o,translateY:l,scale:s,relativeScale:p,transform:d,setTransform:v,pointMessage:y,pointStyle:f}=H(n),g=u([]),h=m((()=>i(r({},e.value),{"--size-stroke":1/p.value,transform:d.value})));return c(t,(function(){o.value=0,l.value=0,s.value=1,d.value=""})),{type:t,color:e,loading:a,mapData:n,nameList:g,setNameList:function(e){g.value=e},style:h,moveMap:function(e){o.value=-(e.x-n.value.center.x)*p.value,l.value=-(e.z-n.value.center.z)*p.value,v(o.value,l.value,s.value)},pointMessage:y,pointStyle:f,setOverPoint:function({message:e,style:t}){y.value=e,f.value=t}}}});Ce.render=function(e,t,a,n,o,l){const s=T("serach-box"),r=T("select-source"),i=T("app-header"),u=T("app-svg"),c=T("config-color"),p=T("app-footer"),d=T("tip-message"),m=T("tip-point");return P(),k(M,null,[z(i,{title:e.mapData.title},{default:A((()=>[z(s,{nameList:e.nameList,onMoveMap:e.moveMap},null,8,["nameList","onMoveMap"]),z(r,{modelValue:e.type,"onUpdate:modelValue":t[0]||(t[0]=t=>e.type=t)},null,8,["modelValue"])])),_:1},8,["title"]),z(u,{data:e.mapData,loading:e.loading,style:C(e.style),onNameList:e.setNameList,onOverPath:e.setOverPoint},null,8,["data","loading","style","onNameList","onOverPath"]),z(c,{modelValue:e.color,"onUpdate:modelValue":t[1]||(t[1]=t=>e.color=t)},null,8,["modelValue"]),z(p,{uptime:e.mapData.uptime,author:e.mapData.author},null,8,["uptime","author"]),z(d,{type:e.type,version:e.mapData.version,introduce:e.mapData.introduce},null,8,["type","version","introduce"]),z(m,{message:e.pointMessage,style:C(e.pointStyle)},null,8,["message","style"])],64)};W(Ce).mount("#app");
