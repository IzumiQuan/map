var K=Object.defineProperty,G=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var j=(e,t,n)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,D=(e,t)=>{for(var n in t||(t={}))ee.call(t,n)&&j(e,n,t[n]);if(W)for(var n of W(t))te.call(t,n)&&j(e,n,t[n]);return e},N=(e,t)=>G(e,Z(t));import{r as k,w as V,t as z,a as ne,c as B,o as q,M as oe,P as ae,b as se,T as re,d as w,e as c,f as h,g as A,h as ue,i as T,j as le,k as O,F as S,l as i,m as _,n as F,p as P,q as I,s as L,u as b,v as H,x as Y,y as J,z as ie,A as ce,B as M,C as pe}from"./vendor.a1e80a45.js";const de=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}};de();const U=[{name:"\u6BDB\u7EBFV4\u2014\u4E0B\u754C\u4EA4\u901A\u5730\u56FE",type:"kedamaV4Nether"},{name:"\u6BDB\u7EBFV4\u2014\u4E3B\u4E16\u754C\u4EA4\u901A\u5730\u56FE",type:"kedamaV4World"},{name:"\u6BDB\u7EBFV3\u2014\u4E0B\u754C\u4EA4\u901A\u5730\u56FE",type:"kedamaV3Nether117"},{name:"\u6BDB\u7EBFV3\u2014\u4E3B\u4E16\u754C\u4EA4\u901A\u5730\u56FE",type:"kedamaV3World"},{name:"\u6BDB\u7EBFV2\u2014\u4E0B\u754C\u4EA4\u901A\u5730\u56FE",type:"kedamaV2Nether115"},{name:"\u6BDB\u7EBFV2\u2014\u4E0B\u754C\u57FA\u5CA9\u4E0A\u5C42\u840C\u65B0\u901A\u9053",type:"kedamaV2Nether128"},{name:"\u6BDB\u7EBFV2\u2014\u4E3B\u4E16\u754C\u901A\u5730\u56FE",type:"kedamaV2World"},{name:"\u55B5\u7A9D\u2014\u4E0B\u754C\u57FA\u5CA9\u4E0A\u5C42\u4EA4\u901A\u5730\u56FE",type:"nyaaNether129"},{name:"\u55B5\u7A9D\u2014\u4E0B\u754C\u4EA4\u901A\u5730\u56FE",type:"nyaaNether"},{name:"\u55B5\u7A9D\u2014\u4E3B\u4E16\u754C\u901A\u5730\u56FE",type:"nyaaWorld"}],Q=[{key:"--color-ice",value:"#7FDBFF",name:"\u51B0\u9053"},{key:"--color-rail",value:"#FFDC00",name:"\u94C1\u8DEF"},{key:"--color-walk",value:"#85144b",name:"\u6B65\u9053"},{key:"--color-green",value:"#2ECC40",name:"\u901A\u9876"},{key:"--color-frame",value:"#AAAAAA",name:"\u8FB9\u6846"}];function me(){const e=n()||r(),t=k(e);V(t,s,{deep:!0});function n(){const a=localStorage.getItem("color-list");return a?JSON.parse(a):void 0}function s(){localStorage.setItem("color-list",JSON.stringify(t.value))}function r(){const a={};return Q.forEach(({key:o,value:u})=>{a[o]=u}),a}return t}async function ve(e){return(await fetch(e)).json()}function fe(e){const t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return n!==null?unescape(n[2]):null}function ye(e){return new Promise(t=>{let n=!0;e.wheelDelta?n=e.wheelDelta>0:n=e.detail<0,e.preventDefault&&e.preventDefault(),t({center:{x:e.clientX,y:e.clientY},direction:n})})}function he(e,t){let n=0;return function(...s){const r=new Date().getTime();r-n>t&&(e.call(this,...s),n=r)}}function ge(e){const t=ne({translateX:0,translateY:0,scale:1,leastWidth:1,transform:"",pointMessage:"",pointStyle:{}}),n=B(()=>.45*t.scale*t.leastWidth/e.value.radius);q(()=>{const a=document.getElementById("app-svg"),o=a.offsetWidth,u=a.offsetHeight,p=new oe(a),y=new ae,d=new se,g=new re;t.leastWidth=window.matchMedia("(orientation: portrait)").matches?o:u,p.add([y,d,g]),p.on("panmove",({deltaX:l,deltaY:v})=>{s(t.translateX+l,t.translateY+v,t.scale)}),p.on("panend",({deltaX:l,deltaY:v})=>{t.translateX+=l,t.translateY+=v}),p.get("pinch").set({enable:!0}),p.on("pinchmove",({scale:l,center:v})=>{const f=t.scale*l;f>=.3&&f<=50&&s(t.translateX+(v.x-o/2-t.translateX)*(1-l),t.translateY+(v.y-u/2-t.translateY)*(1-l),t.scale*l)}),p.on("pinchend",({scale:l,center:v})=>{const f=t.scale*l;t.scale=f<.3?.3:f>50?50:f,f>=.3&&f<=50&&(t.translateX+=(v.x-o/2-t.translateX)*(1-l),t.translateY+=(v.y-u/2-t.translateY)*(1-l))}),p.on("tap",({center:l})=>{r(N(D({},l),{screeWidth:o,screeHeight:u}))}),a.onwheel=he(m,50);function m(l){ye(l).then(({direction:v,center:f})=>{const $=t.scale*(v?1.1:.9);t.scale=$<.3?.3:$>50?50:$,$>=.3&&$<=50&&(t.translateX+=(f.x-o/2-t.translateX)*(v?-.1:.1),t.translateY+=(f.y-u/2-t.translateY)*(v?-.1:.1),s(t.translateX,t.translateY,t.scale))})}});function s(a,o,u){t.transform=`translate3d(${a}px, ${o}px, 0px) scale3d(${u}, ${u}, 1)`,t.pointMessage="",t.pointStyle={}}function r({x:a,y:o,screeWidth:u,screeHeight:p}){const y=~~((a-u/2-t.translateX)/n.value+e.value.center.x),d=~~((o-p/2-t.translateY)/n.value+e.value.center.z);t.pointMessage=`x: ${y}, z: ${d}`,t.pointStyle={left:a+"px",top:o+"px"}}return N(D({},z(t)),{relativeScale:n,setTransform:s})}function $e(){const e=n()||s()||r(),t=k(e);V(t,a);function n(){return fe("type")}function s(){const o=localStorage.getItem("map-type");return o?JSON.parse(o):void 0}function r(){return U[0].type}function a(){localStorage.setItem("map-type",JSON.stringify(t.value))}return t}const R={title:"",radius:0,center:{x:0,z:0},data:[]};function _e(e){const t=k(!1),n=k(R);s(),V(e,s);async function s(){t.value=!0,n.value=R,n.value=await ve(`/config/${e.value}.json`),t.value=!1}return{loading:t,mapData:n}}function ke(e){const t=B(()=>e.value.borderstyle||!1),n=B(()=>e.value.radius||0),s=B(()=>e.value.center||{x:0,z:0}),r=B(()=>`0 0 ${n.value*2} ${n.value*2}`),a=B(()=>e.value.data||[]),o=B(()=>{let p=[];for(let y=0;y<a.value.length;y++){const d=a.value[y];d.name&&p.push({name:d.name,point:d.points[d.points.length-1]}),d.namelist&&(p=p.concat(d.namelist))}return p});function u(p){let y="";for(let d=0;d<p.length;d++){const g=p[d],m=g.x+n.value-s.value.x,l=g.z+n.value-s.value.z;if(d===0)y+=`M${m} ${l} `;else if(g.type){const v=p[d-1],f=v.x+n.value-s.value.x,$=v.z+n.value-s.value.z,X=(g.ex||0)+n.value-s.value.x,E=(g.ez||0)+n.value-s.value.z;g.type==="n-w"?y+=`Q${m>f?f:m} ${l>$?$:l} ${m} ${l} `:g.type==="n-e"?y+=`Q${m>f?m:f} ${l>$?$:l} ${m} ${l} `:g.type==="s-w"?y+=`Q${m>f?f:m} ${l>$?l:$} ${m} ${l} `:g.type==="s-e"?y+=`Q${m>f?m:f} ${l>$?l:$} ${m} ${l} `:y+=`Q${X} ${E} ${m} ${l} `}else y+=`L${m} ${l} `}return y}return{borderstyle:t,radius:n,center:s,viewBox:r,dataList:a,nameList:o,parsePath:u}}function Ae(){const e=k(""),t=k({});function n({clientX:r,clientY:a},o){o&&(e.value=o,t.value={left:r+"px",top:a+"px"})}function s(){e.value&&setTimeout(()=>{e.value="",t.value={}},300)}return{notes:e,client:t,enterPath:n,outPath:s}}function Be(e){const{nameList:t}=z(e),n=k(""),s=B(()=>n.value?t.value.filter(r=>{const a=n.value.trim().toLocaleLowerCase();return r.name.toLocaleLowerCase().includes(a)}):[]);return{keyword:n,list:s}}function we(e){const{type:t,version:n,introduce:s}=z(e),r=k("");let a;V([t,n],o),q(()=>{if(!a){const u=localStorage.getItem("map-version");a=u?JSON.parse(u):{}}o()});function o(){if(n&&n.value){const u=a[t.value];(!u||u<n.value)&&(r.value=(s==null?void 0:s.value)||"",a[t.value]=n.value,localStorage.setItem("map-version",JSON.stringify(a)))}}return r}var C=(e,t)=>{const n=e.__vccOpts||e;for(const[s,r]of t)n[s]=r;return n};const Ce=w({name:"AppHeader",props:{title:{type:String,default:""}}}),Ee={class:"header"},Se={class:"title"},Le={class:"fun-content"};function Me(e,t,n,s,r,a){return i(),c(S,null,[h("header",Ee,[h("h1",Se,A(e.title),1),h("div",Le,[ue(e.$slots,"default")])]),(i(),T(O,{to:"title"},[le(A(e.title),1)]))],64)}var Ve=C(Ce,[["render",Me]]);const ze=w({name:"AppSvg",props:{data:{type:Object,required:!0},loading:Boolean,style:Object},emits:["nameList","overPath"],setup(e,{emit:t}){const{data:n,loading:s,style:r}=z(e),{borderstyle:a,radius:o,center:u,viewBox:p,dataList:y,nameList:d,parsePath:g}=ke(n),{notes:m,client:l,enterPath:v,outPath:f}=Ae();return V(d,()=>{t("nameList",d.value)}),V(l,()=>{t("overPath",{style:l.value,message:m.value})}),{loading:s,style:r,borderstyle:a,radius:o,center:u,viewBox:p,dataList:y,nameList:d,parsePath:g,enterPath:v,outPath:f}}}),Fe={id:"app-svg"},Pe={key:"true",class:"loading"},be=h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},[h("path",{d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4",opacity:".25"}),h("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"},[h("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"0.8s",repeatCount:"indefinite"})])],-1),De=[be],Ne=["viewBox"],Te=["width","height"],Oe=["cx","cy","r"],Ie=["d"],Xe=["cx","cy","onMouseenter"],Ye=["d","onMouseenter"],We=["x","y"];function je(e,t,n,s,r,a){return i(),c("section",Fe,[_(P,{name:"mode-fade",mode:"out-in"},{default:F(()=>[e.loading?(i(),c("div",Pe,De)):(i(),c("svg",{key:"flase",style:I(e.style),viewBox:e.viewBox,class:"svg",xmlns:"http://www.w3.org/2000/svg"},[h("g",null,[e.borderstyle==="square"?(i(),c("rect",{key:0,width:e.radius*2,height:e.radius*2,class:"path border"},null,8,Te)):e.borderstyle==="circles"?(i(),c("circle",{key:1,cx:e.radius,cy:e.radius,r:e.radius,class:"path border"},null,8,Oe)):Array.isArray(e.borderstyle)?(i(),c("path",{key:2,d:e.parsePath(e.borderstyle),class:"path border"},null,8,Ie)):L("",!0)]),h("g",null,[(i(!0),c(S,null,b(e.dataList,o=>(i(),c(S,null,[o.type==="green"?(i(),c("circle",{key:0,cx:o.points[0].x+e.radius-e.center.x,cy:o.points[0].z+e.radius-e.center.z,class:H([o.type,"path"]),onMouseenter:u=>e.enterPath(u,o.notes),onMouseout:t[0]||(t[0]=(...u)=>e.outPath&&e.outPath(...u))},null,42,Xe)):(i(),c("path",{key:1,d:e.parsePath(o.points),class:H([o.type,"path"]),onMouseenter:u=>e.enterPath(u,o.notes),onMouseout:t[1]||(t[1]=(...u)=>e.outPath&&e.outPath(...u))},null,42,Ye))],64))),256))]),h("g",null,[(i(!0),c(S,null,b(e.nameList,(o,u)=>(i(),c("text",{key:u,x:o.point.x+e.radius-e.center.x,y:o.point.z+e.radius-e.center.z,class:"text"},A(o.name),9,We))),128))])],12,Ne))]),_:1})])}var qe=C(ze,[["render",je]]);const He=w({name:"AppFooter",props:{uptime:{type:String,default:""},author:{type:String,default:""}}}),Je={class:"footer"},Ue={key:0,class:"text"},Qe={key:1,class:"text"},Re={key:2,class:"text"},xe={key:3,class:"text"};function Ke(e,t,n,s,r,a){return i(),c("footer",Je,[e.uptime?(i(),c("span",Ue,"\u66F4\u65B0\u65F6\u95F4")):L("",!0),e.uptime?(i(),c("span",Qe,A(e.uptime),1)):L("",!0),e.author?(i(),c("span",Re,"\u6570\u636E\u7EF4\u62A4")):L("",!0),e.author?(i(),c("span",xe,A(e.author),1)):L("",!0)])}var Ge=C(He,[["render",Ke]]);const Ze=w({name:"SerachBox",props:{nameList:{type:Array,required:!0}},emits:["moveMap"],setup(e,{emit:t}){const{keyword:n,list:s}=Be(e),r=k(!1);function a(u){o(),t("moveMap",u)}function o(){n.value="",r.value=!r.value}return{keyword:n,list:s,show:r,toggle:o,move:a}}}),et=h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1026 1024"},[h("path",{d:"M513.28 0C380.16 0 252.16 51.2 149.76 148.48-49.92 348.16-49.92 675.84 149.76 875.52c102.4 102.4 230.4 148.48 363.52 148.48 133.12 0 261.12-51.2 363.52-148.48C1076.48 675.84 1076.48 353.28 876.8 153.6c-102.4-102.4-235.52-153.6-363.52-153.6m0 51.2c61.44 0 117.76 10.24 174.08 35.84 56.32 25.6 107.52 56.32 153.6 102.4 46.08 46.08 76.8 97.28 102.4 153.6 20.48 51.2 30.72 107.52 30.72 168.96s-10.24 117.76-35.84 174.08c-25.6 56.32-56.32 107.52-102.4 153.6-46.08 46.08-97.28 76.8-153.6 102.4-51.2 20.48-107.52 30.72-168.96 30.72-61.44 0-117.76-10.24-174.08-35.84-56.32-25.6-107.52-56.32-153.6-102.4-46.08-46.08-76.8-97.28-102.4-153.6-20.48-51.2-30.72-107.52-30.72-168.96 0-61.44 10.24-117.76 35.84-174.08 25.6-56.32 56.32-107.52 102.4-153.6 46.08-46.08 97.28-76.8 153.6-102.4 51.2-20.48 107.52-30.72 168.96-30.72"}),h("path",{d:"M666.88 634.88l97.28 97.28c10.24 10.24 10.24 25.6 0 35.84-10.24 10.24-25.6 10.24-35.84 0l-97.28-97.28c-40.96 30.72-87.04 46.08-143.36 46.08C359.68 716.8 257.28 614.4 257.28 486.4S359.68 256 487.68 256 718.08 358.4 718.08 486.4c0 56.32-20.48 107.52-51.2 148.48z m-179.2 30.72c97.28 0 179.2-81.92 179.2-179.2S584.96 307.2 487.68 307.2 308.48 389.12 308.48 486.4 390.4 665.6 487.68 665.6z"})],-1),tt={class:"serach-inpit"},nt={class:"serach-list"},ot=["onClick"],at={class:"name"},st={class:"point"};function rt(e,t,n,s,r,a){return i(),c("div",{class:"icon-button",onClick:t[3]||(t[3]=(...o)=>e.toggle&&e.toggle(...o))},[et,(i(),T(O,{to:"body"},[_(P,{name:"mask-zoom"},{default:F(()=>[e.show?(i(),c("section",{key:0,class:"mask",onClick:t[2]||(t[2]=(...o)=>e.toggle&&e.toggle(...o))},[h("div",{class:"content",onClick:t[1]||(t[1]=ce(()=>{},["stop"]))},[h("div",tt,[Y(h("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.keyword=o),type:"text",autofocus:"",class:"input"},null,512),[[J,e.keyword]])]),_(P,{name:"zoom"},{default:F(()=>[Y(h("div",nt,[(i(!0),c(S,null,b(e.list,(o,u)=>(i(),c("div",{key:u,class:"list-item",onClick:p=>e.move(o.point)},[h("span",at,A(o.name),1),h("span",st,A(`x: ${o.point.x}, y: ${o.point.y}, z: ${o.point.z}`),1)],8,ot))),128))],512),[[ie,e.list.length]])]),_:1})])])):L("",!0)]),_:1})]))])}var ut=C(Ze,[["render",rt]]);const lt=w({name:"SelectSource",props:{modelValue:String},emits:["update:modelValue"],setup(e,{emit:t}){const{modelValue:n}=z(e);function s(r){const a=r.target;t("update:modelValue",a==null?void 0:a.value)}return{mapList:U,modelValue:n,selectItem:s}}}),it=["value"],ct=["value"];function pt(e,t,n,s,r,a){return i(),c("select",{value:e.modelValue,class:"select-source",onChange:t[0]||(t[0]=(...o)=>e.selectItem&&e.selectItem(...o))},[(i(!0),c(S,null,b(e.mapList,o=>(i(),c("option",{key:o.type,value:o.type},A(o.name),9,ct))),128))],40,it)}var dt=C(lt,[["render",pt]]);const mt=w({name:"ConfigColor",props:{modelValue:{type:Object,required:!0}},setup(e){const{modelValue:t}=z(e);function n(s){t.value[s.key]=s.value}return{colorList:Q,modelValue:t,reset:n}}}),vt={class:"config-color"},ft=["onUpdate:modelValue"],yt=["onClick"];function ht(e,t,n,s,r,a){return i(),c("section",vt,[(i(!0),c(S,null,b(e.colorList,o=>(i(),c("div",{key:o.key,class:"color-item"},[Y(h("input",{"onUpdate:modelValue":u=>e.modelValue[o.key]=u,type:"color",class:"input"},null,8,ft),[[J,e.modelValue[o.key]]]),h("span",{class:"text",onClick:u=>e.reset(o)},A(o.name),9,yt)]))),128))])}var gt=C(mt,[["render",ht]]);const $t=w({name:"TipMessage",props:{type:{type:String,required:!0},version:Number,introduce:String},setup(e){const t=we(e);function n(){t.value=""}return{introduceInfo:t,close:n}}}),_t=["innerHTML"];function kt(e,t,n,s,r,a){return i(),T(O,{to:"body"},[_(P,{name:"mask-zoom"},{default:F(()=>[e.introduceInfo?(i(),c("section",{key:0,class:"mask",onClick:t[0]||(t[0]=(...o)=>e.close&&e.close(...o))},[h("div",{class:"content",innerHTML:e.introduceInfo},null,8,_t)])):L("",!0)]),_:1})])}var At=C($t,[["render",kt]]);const Bt=w({name:"TipPoint",props:{message:String,style:Object}});function wt(e,t,n,s,r,a){return i(),T(O,{to:"body"},[_(P,{name:"zoom"},{default:F(()=>[e.message?(i(),c("div",{key:0,style:I(e.style),class:"tip-point"},A(e.message),5)):L("",!0)]),_:1})])}var Ct=C(Bt,[["render",wt]]);const Et=w({name:"App",components:{AppHeader:Ve,AppSvg:qe,AppFooter:Ge,SerachBox:ut,SelectSource:dt,ConfigColor:gt,TipMessage:At,TipPoint:Ct},setup(){const e=me(),t=$e(),{loading:n,mapData:s}=_e(t),{translateX:r,translateY:a,scale:o,relativeScale:u,transform:p,setTransform:y,pointMessage:d,pointStyle:g}=ge(s),m=k([]),l=B(()=>N(D({},e.value),{"--size-stroke":1/u.value,transform:p.value}));V(t,v);function v(){r.value=0,a.value=0,o.value=1,p.value=""}function f(E){m.value=E}function $(E){r.value=-(E.x-s.value.center.x)*u.value,a.value=-(E.z-s.value.center.z)*u.value,y(r.value,a.value,o.value)}function X({message:E,style:x}){d.value=E,g.value=x}return{type:t,color:e,loading:n,mapData:s,nameList:m,setNameList:f,style:l,moveMap:$,pointMessage:d,pointStyle:g,setOverPoint:X}}});function St(e,t,n,s,r,a){const o=M("serach-box"),u=M("select-source"),p=M("app-header"),y=M("app-svg"),d=M("config-color"),g=M("app-footer"),m=M("tip-message"),l=M("tip-point");return i(),c(S,null,[_(p,{title:e.mapData.title},{default:F(()=>[_(o,{nameList:e.nameList,onMoveMap:e.moveMap},null,8,["nameList","onMoveMap"]),_(u,{modelValue:e.type,"onUpdate:modelValue":t[0]||(t[0]=v=>e.type=v)},null,8,["modelValue"])]),_:1},8,["title"]),_(y,{data:e.mapData,loading:e.loading,style:I(e.style),onNameList:e.setNameList,onOverPath:e.setOverPoint},null,8,["data","loading","style","onNameList","onOverPath"]),_(d,{modelValue:e.color,"onUpdate:modelValue":t[1]||(t[1]=v=>e.color=v)},null,8,["modelValue"]),_(g,{uptime:e.mapData.uptime,author:e.mapData.author},null,8,["uptime","author"]),_(m,{type:e.type,version:e.mapData.version,introduce:e.mapData.introduce},null,8,["type","version","introduce"]),_(l,{message:e.pointMessage,style:I(e.pointStyle)},null,8,["message","style"])],64)}var Lt=C(Et,[["render",St]]);pe(Lt).mount("#app");
